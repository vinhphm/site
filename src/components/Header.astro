---
import config from '@/config'
import ThemeToggle from './ThemeToggle.vue'

interface Props {
  section?: string
}

const { section } = Astro.props

const navLinks = config.header.navLinks
const filteredNavLinks = section
  ? navLinks.filter(link => link.text !== section)
  : navLinks

const sectionNavLink = section
  ? navLinks.find(link => link.text === section)
  : null
---

<header class="flex items-center justify-between mb-8" transition:name="header">
  <div class="flex gap-2 items-center">
    <a href="/" class="text-gray-900 dark:text-zinc-100 font-medium">
      {config.title}
    </a>
    {section && (
      <>
        <span class="text-gray-400 dark:text-zinc-600">/</span>
        {sectionNavLink
          ? (
            <a href={sectionNavLink.href} class="text-gray-500 hover:text-gray-900 hover:underline dark:text-zinc-500 dark:hover:text-zinc-100">
              {section}
            </a>
          )
          : (
            <span class="text-gray-500 dark:text-zinc-500">{section}</span>
          )}
      </>
    )}
  </div>

  <nav class="flex gap-4 items-center">
    {filteredNavLinks.map(link => (
      <a class="text-gray-500 hover:text-gray-900 hover:underline dark:text-zinc-500 dark:hover:text-zinc-100" href={link.href}>
        {link.text}
      </a>
    ))}
    <ThemeToggle client:load />
  </nav>
</header>
